<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Installing Stardust</title>
  </head>

  <body>
<h1>Installing Stardust (Version 0.5, 2013-04-11)</h1>

 This is not trivial, because Stardust depends on other software to solve the
 constraints generated by typechecking indexed types.

 <h2>Step 1: Install a constraint solver</h2>

    Currently, the only supported constraint solver is
    <a href="http://cvc4.cs.nyu.edu/web/#Downloads">CVC4</a>.
    <p>
  <!--
    I recommend using the 1.0 release, patched to fix a dependency:
    <blockquote>
    <a href="http://stardust.qc.com/cvc4-1.0-fixedlink.tar.gz"><tt>cvc4-1.0-fixedlink.tar.gz</tt></a>
    </blockquote>
    (This is identical to the normal CVC4 1.0, except that the <tt>contrib/get-antlr-3.4</tt> script uses a working
    domain name to download ANTLR.  If you don't trust me, get CVC4 1.0 from the official site, then replace the <tt>contrib/get-antlr-3.4</tt>
    script with the version from a recent nightly build.)
  -->
    <p>   <!-- The nightly builds are sometimes unstable. -->
    Stardust has been (lightly) tested with <a href="http://cvc4.cs.nyu.edu/web/#Downloads">CVC4</a> 1.1, which you can download from NYU:

          <ul>
            <li><a href="http://cvc4.cs.nyu.edu/builds/macos/cvc4-1.1.mpkg">Mac OS X installer package</a> (.mpkg)</li>
            <li><a href="http://cvc4.cs.nyu.edu/web/2013/03/26/mac-and-win32-nightly-builds-available/">Mac OS X, via macports</a></li>
            <li><a href="http://cvc4.cs.nyu.edu/builds/x86_64-linux-opt/cvc4-1.1-x86_64-linux-opt">Linux binary (<tt>mv cvc4-1.1-x86_64-linux-opt cvc4 ; chmod u+x cvc4 ; sudo mv cvc4 /usr/local/bin</tt>)</a></li>
            <li><a href="http://cvc4.cs.nyu.edu/cvc4-builds/debian/stable/">Debian Linux packages</a></li>
            <li><a href="http://cvc4.cs.nyu.edu/builds/src/cvc4-1.1.tar.gz">Linux or OS X: Build from source</a> (.tar.gz file)</li>
          </ul>
<!--    <p>
    For help installing CVC4, see the instructions in the CVC4 distribution.  Some hints for all platforms:
    <ul>
        <li>CVC4 depends on <a href="http://gmplib.org/#DOWNLOAD">libgmp</a>, which you may already have.
        </li>
        <li>Run the <tt>contrib/get-antlr-3.4</tt> script <b>first</b>; it will print the arguments you need to pass to <tt>./configure</tt>.
        </li>
    </ul>
    Some hints specific to users of MacPorts (the <tt>port</tt> command) on Mac OS X 10.6.x (and probably other OS X versions):
    <ul>
        <li>CVC4 requires Boost; try
           <blockquote><tt>sudo port install boost</tt></blockquote>
        <li>You may already have libgmp; if not, try installing it with
           <blockquote><tt>sudo port install gmp</tt></blockquote>
          However, CVC4 will probably not find the MacPorts libgmp by itself, so you should
          <blockquote><tt>export LDFLAGS="$LDFLAGS -L/opt/local/lib"</tt></blockquote>
          before running <tt>./configure</tt>.
        </li>
    </ul>
-->

<h2>Step 2: Install a Standard ML compiler</h2>

    Stardust should compile under any recent version of <a href="http://smlnj.org">SML of New Jersey</a>;
    I use <a href="http://smlnj.org/dist/working/110.74/index.html">110.74</a>.
    <p>
    It also compiles under <a href="http://sourceforge.net/projects/mlton/files/mlton/20100608/">MLton version 20100608</a>
    (probably other versions, too).
   <p>
   MLton will generate a standalone Stardust executable that does not require an SML compiler to run, but you
   still need an SML compiler to compile the .stardust.sml file generated by Stardust.


<h2>Step 3: Build Stardust</h2>

    Enter the <tt>src</tt> subdirectory:
    <blockquote>
      <tt>cd src</tt>
    </blockquote>
    
  <h3>Using SML/NJ</h3>

    From the <tt>src</tt> subdirectory, type
    <blockquote>
      <tt>make nj</tt>
    </blockquote>
    to build under SML/NJ.  This will generate a "heap image" and a script called <tt>stardust-nj</tt>,
    which invokes SML/NJ on the heap image.

  <h3>Using MLton</h3>

    From the <tt>src</tt> subdirectory, type
    <blockquote>
      <tt>make mlton</tt>
    </blockquote>
    to build under MLton, producing an executable called <tt>stardust</tt>.
<!--    <p>
    MLton usually generates faster code than SML/NJ, and Stardust is no exception.
-->

<h2>Step 4: Try Stardust</h2>

    To check the installation, run one of the examples in the <a href="http://stardust.qc.com/examples">subdirectory</a>:
    <blockquote>
      <tt>./stardust-nj kennedy11</tt>
      <br>
      <tt>./stardust kennedy11</tt>
    </blockquote>
    or equivalently,
    <blockquote>
      <tt>./stardust-nj ../examples/kennedy11.sdml</tt>
      <br>
      <tt>./stardust ../examples/kennedy11.sdml</tt>
    </blockquote>
    (If you give a filename without the <tt>.sdml</tt> extension, Stardust adds <tt>.sdml</tt> and looks for the file in <tt>examples</tt>.
    If you give the <tt>.sdml</tt> extension, Stardust interprets it as an ordinary pathname.)
  </body>
</html>
